{"version":3,"sources":["../server/server.js"],"names":["path","require","install","dbUrl","process","env","MONGOLAB_URI","connect","err","db","passDB","req","res","next","app","use","static","json","get","sendFile","resolve","__dirname","listen","PORT","console","log"],"mappings":";;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;AARA;AAUA,IAAMA,OAAOC,QAAQ,MAAR,CAAb;AACA,2BAAiBC,OAAjB;;AAEA;AACA,IAAMC,QAAQC,QAAQC,GAAR,CAAYC,YAA1B,C,CAAwC;;AAExC,qBAAYC,OAAZ,CAAoBJ,KAApB,EAA2B,UAACK,GAAD,EAAMC,EAAN,EAAa;AACtC,MAAID,GAAJ,EAAS;AAAE,WAAOA,GAAP;AAAa;;AAExB,MAAME,SAAS,SAATA,MAAS,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjCF,QAAIF,EAAJ,GAASA,EAAT;AACAI;AACD,GAHD;;AAKA,MAAMC,MAAM,wBAAZ;;AAEAA,MAAIC,GAAJ,CAAQ,kBAAQC,MAAR,CAAe,QAAf,CAAR;AACAF,MAAIC,GAAJ,CAAQ,qBAAWE,IAAX,EAAR;;AAEAH,MAAIC,GAAJ,CAAQ,QAAR,EAAkBL,MAAlB;AACAI,MAAIC,GAAJ,CAAQ,QAAR,EAAkBL,MAAlB;;AAEAI,MAAII,GAAJ,CAAQ,GAAR,EAAa,UAACP,GAAD,EAAMC,GAAN,EAAc;AACzBA,QAAIO,QAAJ,CAAanB,KAAKoB,OAAL,CAAaC,SAAb,EAAwB,WAAxB,EAAqC,YAArC,CAAb;AACD,GAFD;;AAIAP,MAAIQ,MAAJ,CAAWlB,QAAQC,GAAR,CAAYkB,IAAZ,IAAoB,IAA/B,EAAqC,YAAM;AACzCC,YAAQC,GAAR,CAAY,aAAZ;AACD,GAFD;AAGD,CAvBD","file":"server.js","sourcesContent":["// 'use strict'\r\nimport 'babel-polyfill';\r\nimport SourceMapSupport from 'source-map-support';\r\nimport express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport {MongoClient} from 'mongodb';\r\nimport polls from './routes/polls';\r\nimport users from './routes/users';\r\nimport getDB from './db';\r\n\r\nconst path = require('path');\r\nSourceMapSupport.install();\r\n\r\n//const dbUrl = 'mongodb://localhost/local'; // local db\r\nconst dbUrl = process.env.MONGOLAB_URI; // production db\r\n\r\nMongoClient.connect(dbUrl, (err, db) => {\r\n  if (err) { return err; }\r\n\r\n  const passDB = (req, res, next) => {\r\n    req.db = db;\r\n    next();\r\n  };\r\n\r\n  const app = express();\r\n\r\n  app.use(express.static('static'));\r\n  app.use(bodyParser.json());\r\n\r\n  app.use('/users', passDB, users);\r\n  app.use('/polls', passDB, polls);\r\n\r\n  app.get('*', (req, res) => {\r\n    res.sendFile(path.resolve(__dirname, '../static', 'index.html'));\r\n  });\r\n\r\n  app.listen(process.env.PORT || 3000, () => {\r\n    console.log('App started');\r\n  });\r\n});\r\n"]}